<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SR Security Admin Panel</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet"/>
  <style>
  * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Poppins', sans-serif;
  background: #f5f5f5;
  padding: 20px;
  color: #333;
}

h1 {
  text-align: center;
  color: #1a237e;
  margin-bottom: 30px;
  font-size: 1.8rem;
}

form {
  max-width: 800px;
  margin: 0 auto 30px;
  background: #ffffff;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 10px;
}

input, textarea, select, button {
  width: 100%;
  padding: 12px;
  margin-top: 12px;
  font-size: 15px;
  border: 1.5px solid #999;
  border-radius: 4px;
  background: #fff;
  color: #000;
  box-shadow: none;
  outline:none;
}
input:hover,select:hover,textarea:hover{
  border:2px solid #01616b;
}
textarea {
  resize: vertical;
  min-height: 100px;
}

button {
  background: #1a237e;
  color: white;
  font-weight: 600;
  border: none;
  margin-top: 16px;
  cursor: pointer;
  transition: background 0.2s ease;
}

button:hover {
  background: #3949ab;
}

.rate-list {
  max-width: 1100px;
  margin: auto;
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.rate-item {
  background: #fff;
  border: 1px solid #ccc;
  padding: 16px;
  border-radius: 8px;
}

.rate-item h3 {
  color: #1a237e;
  font-size: 1.1rem;
  margin-bottom: 8px;
}

.rate-item p {
  margin: 6px 0;
}

.rate-item strong {
  display: block;
  margin-top: 10px;
  color: #388e3c;
}

.rate-item button {
  width: auto;
  margin-right: 10px;
  margin-top: 12px;
  padding: 8px 14px;
  font-size: 14px;
  border-radius: 4px;
}

.edit-btn {
  background-color: #0288d1;
  color: white;
}

.edit-btn:hover {
  background-color: #0277bd;
}

.delete-btn {
  background-color: #c62828;
  color: white;
}

.delete-btn:hover {
  background-color: #b71c1c;
}

@media (max-width: 600px) {
  form {
    padding: 15px;
  }

  h1 {
    font-size: 1.4rem;
  }

  input, textarea, select, button {
    font-size: 14px;
  }

  .rate-item h3 {
    font-size: 1rem;
  }
}
</style>
</head>
<body>

<h1>üõ°Ô∏è SR Security Services ‚Äì Admin Panel</h1>

<form id="rateForm">
  <select id="serviceType" required>
    <option value="">-- Select Service Type --</option>
    <option>ATM Security Guard</option>
    <option>Office Security Guard (Day/Night)</option>
    <option>Residential Society Guard</option>
    <option>Industrial/Factory Guard</option>
    <option>Bank Security (Ex-Serviceman)</option>
    <option>Event Security</option>
    <option>Bouncers</option>
    <option>VIP/Personal Security (PSO)</option>
    <option>Night Patrolling Guard</option>
    <option>Gunman (Licensed)</option>
  </select>

  <textarea id="description" placeholder="Description" required></textarea>
  <input type="text" id="rate" placeholder="Rate (e.g. ‚Çπ15,000/month)" required />
  <button type="submit" id="submitBtn">Add Service</button>
</form>

<div class="rate-list" id="rateList"></div>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue, set, remove } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAKjdzj6gcl6bfqvaI8sYEJv8KCDnHUwSM",
    authDomain: "srsecurity-9d62a.firebaseapp.com",
    databaseURL: "https://srsecurity-9d62a-default-rtdb.firebaseio.com",
    projectId: "srsecurity-9d62a",
    storageBucket: "srsecurity-9d62a.appspot.com",
    messagingSenderId: "801710662719",
    appId: "1:801710662719:web:376de7896a74f5db03848a"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const rateRef = ref(db, 'services');

  const form = document.getElementById('rateForm');
  const rateList = document.getElementById('rateList');
  const serviceTypeEl = document.getElementById('serviceType');
  const descriptionEl = document.getElementById('description');
  const rateEl = document.getElementById('rate');
  const submitBtn = document.getElementById('submitBtn');

  let editId = null;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const serviceType = serviceTypeEl.value.trim();
    const description = descriptionEl.value.trim();
    const rate = rateEl.value.trim();
    const id = serviceType.toLowerCase().replace(/\s+/g, "_");

    if (!serviceType || !description || !rate) return;

    await set(ref(db, `services/${id}`), {
      serviceType,
      description,
      rate
    });

    form.reset();
    submitBtn.textContent = "Add Service";
    editId = null;
  });

  onValue(rateRef, (snapshot) => {
    rateList.innerHTML = '';
    snapshot.forEach(child => {
      const { serviceType, description, rate } = child.val();
      const id = child.key;

      const div = document.createElement('div');
      div.className = 'rate-item';
      div.innerHTML = `
        <h3>${serviceType}</h3>
        <p>${description}</p>
        <strong>${rate}</strong><br/>
        <button class="edit-btn" onclick="editService('${id}')">Edit</button>
        <button class="delete-btn" onclick="deleteService('${id}')">Delete</button>
      `;
      rateList.appendChild(div);
    });
  });

  window.editService = async (id) => {
    const serviceSnap = await import("https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js").then(({ get, ref }) =>
      get(ref(getDatabase(app), `services/${id}`))
    );

    if (serviceSnap.exists()) {
      const data = serviceSnap.val();
      serviceTypeEl.value = data.serviceType;
      descriptionEl.value = data.description;
      rateEl.value = data.rate;
      submitBtn.textContent = "Update Service";
      editId = id;
    }
  };

  window.deleteService = async (id) => {
    if (confirm("Are you sure you want to delete this service?")) {
      await remove(ref(db, `services/${id}`));
    }
  };
</script>

</body>
</html>